# 네트워크 일반

네트워크의 기본 개념과 프로토콜, 통신 모델에 대해 학습합니다.

---

## OSI 7계층 모델

### 계층별 개요

| 계층 | 이름 | 역할 | PDU | 장비 |
|------|------|------|-----|------|
| 7 | 응용 (Application) | 사용자 인터페이스 제공 | Data | - |
| 6 | 표현 (Presentation) | 데이터 형식 변환, 암호화 | Data | - |
| 5 | 세션 (Session) | 세션 관리, 동기화 | Data | - |
| 4 | 전송 (Transport) | 종단 간 통신, 흐름 제어 | Segment | - |
| 3 | 네트워크 (Network) | 논리 주소, 라우팅 | Packet | 라우터, L3 스위치 |
| 2 | 데이터링크 (Data Link) | 물리 주소, 프레임 전송 | Frame | 스위치, 브리지 |
| 1 | 물리 (Physical) | 비트 전송, 전기 신호 | Bit | 허브, 리피터 |

### 계층별 상세

#### 물리 계층 (Physical Layer)

| 항목 | 설명 |
|------|------|
| 역할 | 비트 스트림을 전기/광 신호로 변환 |
| 전송 매체 | 동축 케이블, UTP, 광섬유, 무선 |
| 토폴로지 | 버스, 스타, 링, 메시 |
| 장비 | 허브, 리피터, 모뎀 |

**전송 매체 특성**

| 매체 | 최대 거리 | 속도 | 특징 |
|------|----------|------|------|
| UTP Cat5e | 100m | 1Gbps | 저렴, 간섭에 취약 |
| UTP Cat6 | 100m | 10Gbps | 향상된 성능 |
| 광섬유 (SMF) | 수십 km | 100Gbps+ | 장거리, 고속 |
| 광섬유 (MMF) | 2km | 10Gbps | 중거리 |

#### 데이터링크 계층 (Data Link Layer)

| 항목 | 설명 |
|------|------|
| 역할 | 노드 간 데이터 전송, 오류 검출 |
| 주소 | MAC 주소 (48비트) |
| 프로토콜 | Ethernet, PPP, HDLC |
| 장비 | 스위치, 브리지 |

**LLC와 MAC 부계층**

| 부계층 | 역할 |
|--------|------|
| LLC (Logical Link Control) | 상위 계층과 인터페이스, 흐름 제어 |
| MAC (Media Access Control) | 매체 접근 제어, 물리 주소 지정 |

**MAC 주소 구조**

```
AA:BB:CC:DD:EE:FF
|______|  |______|
  OUI     장치 고유 번호
(24bit)   (24bit)
```

- OUI (Organizationally Unique Identifier): 제조사 식별
- 총 48비트 (6바이트)

**프레임 구조 (Ethernet II)**

| 필드 | 크기 | 설명 |
|------|------|------|
| Preamble | 7바이트 | 동기화 |
| SFD | 1바이트 | 프레임 시작 구분 |
| 목적지 MAC | 6바이트 | 수신자 MAC |
| 출발지 MAC | 6바이트 | 송신자 MAC |
| Type | 2바이트 | 상위 프로토콜 |
| Data | 46-1500바이트 | 페이로드 |
| FCS | 4바이트 | 오류 검출 (CRC) |

#### 네트워크 계층 (Network Layer)

| 항목 | 설명 |
|------|------|
| 역할 | 논리 주소 지정, 라우팅 |
| 주소 | IP 주소 (32비트/128비트) |
| 프로토콜 | IP, ICMP, ARP, RARP |
| 장비 | 라우터, L3 스위치 |

**IP 헤더 구조 (IPv4)**

| 필드 | 크기 | 설명 |
|------|------|------|
| Version | 4비트 | IP 버전 (4) |
| IHL | 4비트 | 헤더 길이 |
| ToS/DSCP | 8비트 | 서비스 품질 |
| Total Length | 16비트 | 전체 패킷 길이 |
| Identification | 16비트 | 단편화 식별 |
| Flags | 3비트 | 단편화 플래그 |
| Fragment Offset | 13비트 | 단편 위치 |
| TTL | 8비트 | 수명 (홉 수) |
| Protocol | 8비트 | 상위 프로토콜 |
| Header Checksum | 16비트 | 헤더 오류 검출 |
| Source IP | 32비트 | 출발지 IP |
| Destination IP | 32비트 | 목적지 IP |

**Protocol 필드 값**

| 값 | 프로토콜 |
|----|----------|
| 1 | ICMP |
| 6 | TCP |
| 17 | UDP |
| 47 | GRE |
| 50 | ESP |
| 51 | AH |
| 89 | OSPF |

#### 전송 계층 (Transport Layer)

| 항목 | 설명 |
|------|------|
| 역할 | 종단 간 통신, 신뢰성 보장 |
| 주소 | 포트 번호 (16비트) |
| 프로토콜 | TCP, UDP, SCTP |

**TCP vs UDP**

| 특성 | TCP | UDP |
|------|-----|-----|
| 연결 | 연결 지향 | 비연결 |
| 신뢰성 | 보장 | 미보장 |
| 순서 | 보장 | 미보장 |
| 흐름 제어 | 있음 | 없음 |
| 혼잡 제어 | 있음 | 없음 |
| 헤더 크기 | 20바이트+ | 8바이트 |
| 용도 | 웹, 이메일, 파일 전송 | DNS, 스트리밍, VoIP |

#### 상위 계층 (5-7계층)

**세션 계층 (Session)**
- 세션 설정, 유지, 종료
- 체크포인트, 동기화
- 예: NetBIOS, RPC

**표현 계층 (Presentation)**
- 데이터 형식 변환
- 암호화/복호화
- 압축/압축 해제
- 예: SSL/TLS, JPEG, MPEG

**응용 계층 (Application)**
- 사용자 서비스 제공
- 예: HTTP, FTP, SMTP, DNS

---

## TCP/IP 모델

### 계층 구조

| TCP/IP | OSI | 프로토콜 |
|--------|-----|----------|
| 응용 계층 | 5-7계층 | HTTP, FTP, SMTP, DNS, SSH |
| 전송 계층 | 4계층 | TCP, UDP |
| 인터넷 계층 | 3계층 | IP, ICMP, ARP, RARP |
| 네트워크 액세스 계층 | 1-2계층 | Ethernet, Wi-Fi, PPP |

### TCP 프로토콜

#### TCP 헤더 구조

| 필드 | 크기 | 설명 |
|------|------|------|
| Source Port | 16비트 | 출발지 포트 |
| Destination Port | 16비트 | 목적지 포트 |
| Sequence Number | 32비트 | 순서 번호 |
| Acknowledgment Number | 32비트 | 확인 응답 번호 |
| Data Offset | 4비트 | 헤더 길이 |
| Reserved | 6비트 | 예약 |
| Flags | 6비트 | 제어 플래그 |
| Window | 16비트 | 수신 윈도우 크기 |
| Checksum | 16비트 | 오류 검출 |
| Urgent Pointer | 16비트 | 긴급 데이터 위치 |

#### TCP 플래그

| 플래그 | 설명 |
|--------|------|
| URG | 긴급 데이터 |
| ACK | 확인 응답 |
| PSH | 즉시 전달 |
| RST | 연결 강제 종료 |
| SYN | 연결 요청 |
| FIN | 연결 종료 |

#### TCP 3-Way Handshake

```
클라이언트                    서버
    |                          |
    |-------- SYN ------------>|
    |                          |
    |<------ SYN + ACK --------|
    |                          |
    |-------- ACK ------------>|
    |                          |
    |     연결 수립 완료        |
```

| 단계 | 설명 |
|------|------|
| 1 | 클라이언트가 SYN 전송 (seq=x) |
| 2 | 서버가 SYN+ACK 전송 (seq=y, ack=x+1) |
| 3 | 클라이언트가 ACK 전송 (ack=y+1) |

#### TCP 4-Way Handshake (연결 종료)

```
클라이언트                    서버
    |                          |
    |-------- FIN ------------>|
    |                          |
    |<-------- ACK ------------|
    |                          |
    |<-------- FIN ------------|
    |                          |
    |-------- ACK ------------>|
    |                          |
    |     연결 종료 완료        |
```

#### TCP 상태 전이

| 상태 | 설명 |
|------|------|
| CLOSED | 연결 없음 |
| LISTEN | 연결 대기 (서버) |
| SYN_SENT | SYN 전송 후 대기 |
| SYN_RECEIVED | SYN 수신 후 SYN+ACK 전송 |
| ESTABLISHED | 연결 수립 완료 |
| FIN_WAIT_1 | FIN 전송 후 대기 |
| FIN_WAIT_2 | ACK 수신 후 FIN 대기 |
| TIME_WAIT | 종료 후 2MSL 대기 |
| CLOSE_WAIT | FIN 수신 후 대기 |
| LAST_ACK | FIN 전송 후 ACK 대기 |

#### TCP 흐름 제어

| 방식 | 설명 |
|------|------|
| Stop-and-Wait | 하나씩 전송 후 ACK 대기 |
| Sliding Window | 윈도우 크기만큼 연속 전송 |

#### TCP 혼잡 제어

| 방식 | 설명 |
|------|------|
| Slow Start | 윈도우 크기를 지수적으로 증가 |
| Congestion Avoidance | 임계값 이후 선형 증가 |
| Fast Retransmit | 중복 ACK 3회 시 재전송 |
| Fast Recovery | 재전송 후 혼잡 회피로 전환 |

### UDP 프로토콜

#### UDP 헤더 구조

| 필드 | 크기 | 설명 |
|------|------|------|
| Source Port | 16비트 | 출발지 포트 |
| Destination Port | 16비트 | 목적지 포트 |
| Length | 16비트 | 전체 길이 |
| Checksum | 16비트 | 오류 검출 |

### ICMP 프로토콜

#### ICMP 메시지 유형

| Type | 설명 |
|------|------|
| 0 | Echo Reply (ping 응답) |
| 3 | Destination Unreachable |
| 4 | Source Quench |
| 5 | Redirect |
| 8 | Echo Request (ping 요청) |
| 11 | Time Exceeded |

#### ICMP Destination Unreachable 코드

| Code | 설명 |
|------|------|
| 0 | Network Unreachable |
| 1 | Host Unreachable |
| 2 | Protocol Unreachable |
| 3 | Port Unreachable |
| 4 | Fragmentation Needed |
| 13 | Communication Prohibited (방화벽) |

### ARP 프로토콜

#### ARP 동작

| 단계 | 설명 |
|------|------|
| 1 | IP 주소로 통신 시도 |
| 2 | ARP 캐시 확인 |
| 3 | 없으면 ARP Request 브로드캐스트 |
| 4 | 해당 IP의 호스트가 ARP Reply |
| 5 | MAC 주소를 ARP 캐시에 저장 |

#### ARP 관련 명령어

```bash
# ARP 캐시 확인
arp -a

# ARP 캐시 삭제
arp -d [IP]

# 정적 ARP 항목 추가
arp -s [IP] [MAC]
```

#### RARP (Reverse ARP)

- MAC 주소로 IP 주소를 획득
- 디스크 없는 워크스테이션에서 사용
- 현재는 DHCP로 대체

---

## IP 주소 체계

### IPv4 주소

#### 클래스 기반 주소

| 클래스 | 범위 | 네트워크 비트 | 호스트 비트 | 기본 서브넷 |
|--------|------|--------------|------------|-------------|
| A | 1.0.0.0 - 126.255.255.255 | 8 | 24 | 255.0.0.0 |
| B | 128.0.0.0 - 191.255.255.255 | 16 | 16 | 255.255.0.0 |
| C | 192.0.0.0 - 223.255.255.255 | 24 | 8 | 255.255.255.0 |
| D | 224.0.0.0 - 239.255.255.255 | - | - | 멀티캐스트 |
| E | 240.0.0.0 - 255.255.255.255 | - | - | 예약 |

#### 사설 IP 주소

| 클래스 | 범위 |
|--------|------|
| A | 10.0.0.0 - 10.255.255.255 |
| B | 172.16.0.0 - 172.31.255.255 |
| C | 192.168.0.0 - 192.168.255.255 |

#### 특수 IP 주소

| 주소 | 용도 |
|------|------|
| 0.0.0.0 | 기본 경로, 자신의 주소 (설정 전) |
| 127.0.0.1 | 루프백 (localhost) |
| 255.255.255.255 | 제한된 브로드캐스트 |
| 네트워크.255 | 디렉티드 브로드캐스트 |
| 169.254.x.x | APIPA (자동 사설 IP) |

#### 서브넷팅

**서브넷 마스크 표기법**

| CIDR | 서브넷 마스크 | 호스트 수 |
|------|--------------|----------|
| /24 | 255.255.255.0 | 254 |
| /25 | 255.255.255.128 | 126 |
| /26 | 255.255.255.192 | 62 |
| /27 | 255.255.255.224 | 30 |
| /28 | 255.255.255.240 | 14 |
| /29 | 255.255.255.248 | 6 |
| /30 | 255.255.255.252 | 2 |

**서브넷팅 계산**

- 네트워크 주소: IP AND 서브넷 마스크
- 브로드캐스트: 네트워크 주소 OR (NOT 서브넷 마스크)
- 호스트 범위: 네트워크+1 ~ 브로드캐스트-1
- 호스트 수: 2^(호스트 비트) - 2

### IPv6 주소

#### IPv6 특징

| 항목 | 설명 |
|------|------|
| 주소 길이 | 128비트 (16바이트) |
| 표기법 | 콜론으로 구분된 16진수 |
| 헤더 | 고정 40바이트 |
| 브로드캐스트 | 없음 (멀티캐스트 사용) |
| IPsec | 필수 지원 |
| NAT | 불필요 |

#### IPv6 주소 유형

| 유형 | 설명 | 접두사 |
|------|------|--------|
| 유니캐스트 | 1:1 통신 | - |
| 멀티캐스트 | 1:N 통신 | ff00::/8 |
| 애니캐스트 | 가장 가까운 노드로 | - |

#### IPv6 유니캐스트 주소

| 유형 | 접두사 | 설명 |
|------|--------|------|
| 글로벌 유니캐스트 | 2000::/3 | 인터넷 라우팅 가능 |
| 링크 로컬 | fe80::/10 | 로컬 링크 내에서만 유효 |
| 고유 로컬 | fc00::/7 | 사설 주소 역할 |
| 루프백 | ::1/128 | localhost |
| 미지정 | ::/128 | 0.0.0.0 역할 |

#### IPv6 헤더 구조

| 필드 | 크기 | 설명 |
|------|------|------|
| Version | 4비트 | 6 |
| Traffic Class | 8비트 | QoS |
| Flow Label | 20비트 | 흐름 식별 |
| Payload Length | 16비트 | 페이로드 길이 |
| Next Header | 8비트 | 다음 헤더 유형 |
| Hop Limit | 8비트 | TTL 역할 |
| Source Address | 128비트 | 출발지 |
| Destination Address | 128비트 | 목적지 |

#### IPv4에서 IPv6 전환

| 방법 | 설명 |
|------|------|
| 듀얼 스택 | IPv4, IPv6 동시 운영 |
| 터널링 | IPv6를 IPv4로 캡슐화 |
| 변환 | NAT64, DNS64 |

---

## Well-Known 포트

### 주요 포트 번호

| 포트 | 프로토콜 | 서비스 |
|------|----------|--------|
| 20 | TCP | FTP 데이터 |
| 21 | TCP | FTP 제어 |
| 22 | TCP | SSH |
| 23 | TCP | Telnet |
| 25 | TCP | SMTP |
| 53 | TCP/UDP | DNS |
| 67 | UDP | DHCP 서버 |
| 68 | UDP | DHCP 클라이언트 |
| 69 | UDP | TFTP |
| 80 | TCP | HTTP |
| 110 | TCP | POP3 |
| 123 | UDP | NTP |
| 143 | TCP | IMAP |
| 161 | UDP | SNMP |
| 162 | UDP | SNMP Trap |
| 389 | TCP | LDAP |
| 443 | TCP | HTTPS |
| 445 | TCP | SMB/CIFS |
| 465 | TCP | SMTPS |
| 514 | UDP | Syslog |
| 587 | TCP | SMTP Submission |
| 636 | TCP | LDAPS |
| 993 | TCP | IMAPS |
| 995 | TCP | POP3S |
| 1433 | TCP | MS-SQL |
| 1521 | TCP | Oracle |
| 3306 | TCP | MySQL |
| 3389 | TCP | RDP |
| 5432 | TCP | PostgreSQL |
| 5900 | TCP | VNC |
| 8080 | TCP | HTTP Proxy |

### 포트 범위

| 범위 | 이름 | 설명 |
|------|------|------|
| 0 - 1023 | Well-Known | 시스템 서비스 (관리자 권한) |
| 1024 - 49151 | Registered | 등록된 서비스 |
| 49152 - 65535 | Dynamic/Private | 동적 할당 |

---

## 네트워크 장비

### 허브 (Hub)

| 특성 | 설명 |
|------|------|
| 계층 | 물리 계층 (L1) |
| 동작 | 모든 포트로 신호 전달 |
| 충돌 도메인 | 전체가 하나의 충돌 도메인 |
| 단점 | 대역폭 공유, 보안 취약 |

### 브리지 (Bridge)

| 특성 | 설명 |
|------|------|
| 계층 | 데이터링크 계층 (L2) |
| 동작 | MAC 주소 기반 프레임 전달 |
| 기능 | 충돌 도메인 분리, MAC 테이블 학습 |

### 스위치 (Switch)

| 특성 | 설명 |
|------|------|
| 계층 | 데이터링크 계층 (L2) |
| 동작 | MAC 주소 기반 프레임 스위칭 |
| 충돌 도메인 | 포트별 분리 |
| 브로드캐스트 | 모든 포트로 전달 |

**스위칭 방식**

| 방식 | 설명 |
|------|------|
| Store-and-Forward | 전체 프레임 수신 후 전달, 오류 검사 |
| Cut-Through | 목적지 MAC만 확인 후 전달, 빠름 |
| Fragment-Free | 64바이트까지 확인 후 전달 |

**스위치 기능**

| 기능 | 설명 |
|------|------|
| MAC 학습 | 출발지 MAC으로 테이블 구축 |
| 포워딩 | 목적지 MAC 기반 포트로 전달 |
| 필터링 | 동일 세그먼트 트래픽 차단 |
| 플러딩 | 알 수 없는 목적지 시 전체 전달 |
| 에이징 | 일정 시간 후 MAC 항목 삭제 |

### 라우터 (Router)

| 특성 | 설명 |
|------|------|
| 계층 | 네트워크 계층 (L3) |
| 동작 | IP 주소 기반 패킷 라우팅 |
| 기능 | 브로드캐스트 도메인 분리, 경로 결정 |

**라우팅 테이블**

| 필드 | 설명 |
|------|------|
| Destination | 목적지 네트워크 |
| Netmask | 서브넷 마스크 |
| Gateway | 다음 홉 주소 |
| Interface | 출력 인터페이스 |
| Metric | 비용/우선순위 |

### L3 스위치

| 특성 | 설명 |
|------|------|
| 계층 | L2 + L3 |
| 동작 | 스위칭 + 라우팅 |
| 장점 | 하드웨어 기반 고속 라우팅 |
| 용도 | VLAN 간 라우팅 |

### L4/L7 스위치

| 특성 | L4 스위치 | L7 스위치 |
|------|----------|----------|
| 계층 | 전송 계층 | 응용 계층 |
| 분류 기준 | IP, 포트 | URL, 쿠키, 헤더 |
| 용도 | 로드밸런싱 | 콘텐츠 스위칭, WAF |

---

## 네트워크 토폴로지

### 물리적 토폴로지

| 토폴로지 | 설명 | 장점 | 단점 |
|---------|------|------|------|
| 버스 (Bus) | 하나의 케이블에 모든 노드 연결 | 설치 간단, 저렴 | 충돌 발생, 장애 시 전체 마비 |
| 스타 (Star) | 중앙 허브/스위치에 모든 노드 연결 | 장애 격리 용이, 확장 쉬움 | 중앙 장비 장애 시 전체 마비 |
| 링 (Ring) | 노드들이 원형으로 연결 | 토큰 패싱으로 충돌 없음 | 하나의 노드 장애 시 전체 영향 |
| 메시 (Mesh) | 모든 노드가 서로 연결 | 높은 신뢰성, 경로 다양 | 비용 높음, 관리 복잡 |
| 트리 (Tree) | 계층 구조로 연결 | 확장 용이, 관리 쉬움 | 루트 노드 장애 시 하위 영향 |

### 논리적 토폴로지

| 토폴로지 | 설명 |
|---------|------|
| 버스 | 모든 노드가 동시에 데이터 수신 (허브 네트워크) |
| 링 | 토큰 패싱 방식 (Token Ring) |

---

## 다중 접근 방식

### CSMA/CD (Carrier Sense Multiple Access with Collision Detection)

유선 이더넷에서 사용하는 매체 접근 방식입니다.

| 단계 | 동작 |
|------|------|
| Carrier Sense | 전송 전 채널 사용 여부 확인 |
| Multiple Access | 여러 노드가 동시에 접근 가능 |
| Collision Detection | 충돌 감지 시 잼 신호 전송 |
| Backoff | 임의의 시간 대기 후 재전송 |

**CSMA/CD 동작 과정**

1. 채널이 사용 중인지 확인 (Carrier Sense)
2. 채널이 비어있으면 데이터 전송
3. 충돌 감지 시 잼(Jam) 신호 전송
4. 랜덤 시간 대기 (Binary Exponential Backoff)
5. 재전송 시도

### CSMA/CA (Carrier Sense Multiple Access with Collision Avoidance)

무선 네트워크(Wi-Fi)에서 사용하는 매체 접근 방식입니다.

| 단계 | 동작 |
|------|------|
| Carrier Sense | 채널 사용 여부 확인 |
| IFS 대기 | 프레임 간 간격 대기 |
| RTS/CTS | 전송 권한 요청/승인 (선택) |
| ACK | 수신 확인 |

**RTS/CTS (Request To Send / Clear To Send)**

```
송신자                     수신자
   |                         |
   |-------- RTS ----------->|
   |                         |
   |<-------- CTS -----------|
   |                         |
   |-------- Data ---------->|
   |                         |
   |<-------- ACK -----------|
```

- 숨겨진 노드(Hidden Node) 문제 해결
- 충돌을 사전에 방지

---

## 오류 제어

### 오류 검출 방식

| 방식 | 설명 |
|------|------|
| 패리티 검사 | 1비트 오류 검출 (짝수/홀수 패리티) |
| 체크섬 | 데이터 합계 검증 |
| CRC | 다항식 나눗셈 기반 검출 |

### ARQ (Automatic Repeat reQuest)

| 방식 | 설명 | 특징 |
|------|------|------|
| Stop-and-Wait ARQ | 하나씩 전송 후 ACK 대기 | 단순, 효율 낮음 |
| Go-Back-N ARQ | 윈도우만큼 연속 전송, 오류 시 해당 위치부터 재전송 | 누적 ACK |
| Selective Repeat ARQ | 오류 프레임만 선택적 재전송 | 개별 ACK, 버퍼 필요 |

### Go-Back-N vs Selective Repeat

| 항목 | Go-Back-N | Selective Repeat |
|------|-----------|------------------|
| 재전송 범위 | 오류 이후 모든 프레임 | 오류 프레임만 |
| 수신 버퍼 | 1개 | 윈도우 크기만큼 |
| ACK 방식 | 누적 ACK | 개별 ACK |
| 효율성 | 오류 많으면 비효율 | 오류 많아도 효율적 |

---

## DHCP (Dynamic Host Configuration Protocol)

### DHCP 개요

| 항목 | 설명 |
|------|------|
| 포트 | 서버 67/UDP, 클라이언트 68/UDP |
| 기능 | IP 주소, 서브넷 마스크, 게이트웨이, DNS 자동 할당 |
| 임대 | IP 주소 임대 기간 설정 |

### DHCP 동작 과정 (DORA)

```
클라이언트                    서버
    |                          |
    |---- DISCOVER (브로드캐스트) -->|
    |                          |
    |<---- OFFER --------------|
    |                          |
    |---- REQUEST (브로드캐스트) -->|
    |                          |
    |<---- ACK ----------------|
    |                          |
```

| 단계 | 메시지 | 설명 |
|------|--------|------|
| 1 | Discover | 클라이언트가 DHCP 서버 탐색 (브로드캐스트) |
| 2 | Offer | 서버가 IP 주소 제안 |
| 3 | Request | 클라이언트가 IP 주소 요청 (브로드캐스트) |
| 4 | ACK | 서버가 할당 확인 |

### DHCP 메시지 유형

| 메시지 | 설명 |
|--------|------|
| DHCPDISCOVER | 서버 탐색 |
| DHCPOFFER | IP 주소 제안 |
| DHCPREQUEST | IP 주소 요청/갱신 |
| DHCPACK | 할당 확인 |
| DHCPNAK | 할당 거부 |
| DHCPDECLINE | 클라이언트가 IP 거부 |
| DHCPRELEASE | IP 반환 |
| DHCPINFORM | 설정 정보만 요청 |

### DHCP 보안 위협

| 위협 | 설명 | 대응 |
|------|------|------|
| DHCP Starvation | 다수의 DHCP 요청으로 IP 풀 고갈 | Port Security, DHCP Snooping |
| Rogue DHCP Server | 악성 DHCP 서버로 잘못된 정보 제공 | DHCP Snooping |

---

## NAT (Network Address Translation)

### NAT 개요

| 항목 | 설명 |
|------|------|
| 목적 | 사설 IP를 공인 IP로 변환 |
| 이유 | IPv4 주소 부족, 내부 네트워크 보호 |
| 위치 | 라우터, 방화벽 |

### NAT 유형

| 유형 | 설명 |
|------|------|
| Static NAT | 1:1 고정 매핑 |
| Dynamic NAT | N:N 동적 매핑 (풀에서 할당) |
| PAT/NAPT | N:1 매핑 (포트 번호로 구분) |

### PAT (Port Address Translation)

```
내부 네트워크              NAT 장비              외부
192.168.1.10:1234  -->  203.0.113.1:10001  -->  인터넷
192.168.1.20:1234  -->  203.0.113.1:10002  -->  인터넷
192.168.1.30:5678  -->  203.0.113.1:10003  -->  인터넷
```

- 하나의 공인 IP로 다수의 내부 호스트가 인터넷 접속
- 포트 번호로 세션 구분

### NAT 테이블

| 내부 IP:포트 | 외부 IP:포트 | 목적지 |
|-------------|-------------|--------|
| 192.168.1.10:1234 | 203.0.113.1:10001 | 8.8.8.8:53 |
| 192.168.1.20:4567 | 203.0.113.1:10002 | 1.1.1.1:80 |

---

## VLAN (Virtual LAN)

### VLAN 개요

| 항목 | 설명 |
|------|------|
| 정의 | 물리적 위치와 무관하게 논리적으로 분리된 네트워크 |
| 목적 | 브로드캐스트 도메인 분리, 보안 강화, 관리 용이 |
| 표준 | IEEE 802.1Q |

### VLAN 유형

| 유형 | 설명 |
|------|------|
| 포트 기반 VLAN | 스위치 포트별 VLAN 할당 |
| MAC 기반 VLAN | MAC 주소로 VLAN 결정 |
| 프로토콜 기반 VLAN | 프로토콜별 VLAN 분리 |

### 802.1Q 태깅

| 필드 | 크기 | 설명 |
|------|------|------|
| TPID | 16비트 | 태그 프로토콜 식별자 (0x8100) |
| PCP | 3비트 | 우선순위 (QoS) |
| DEI | 1비트 | 드롭 적격 지시자 |
| VID | 12비트 | VLAN ID (0-4095) |

### 트렁크 포트

| 유형 | 설명 |
|------|------|
| 액세스 포트 | 하나의 VLAN에만 속함 (태그 없음) |
| 트렁크 포트 | 여러 VLAN 트래픽 전달 (802.1Q 태그) |
| 네이티브 VLAN | 트렁크에서 태그 없는 프레임의 VLAN |

### VLAN 간 라우팅

| 방식 | 설명 |
|------|------|
| 라우터 연결 | 각 VLAN을 라우터 인터페이스에 연결 |
| Router-on-a-Stick | 하나의 물리 링크에 서브 인터페이스 |
| L3 스위치 | SVI (Switched Virtual Interface) 사용 |

---

## 라우팅 프로토콜

### 라우팅 분류

| 분류 | 유형 | 설명 |
|------|------|------|
| 경로 결정 | 정적 라우팅 | 관리자가 수동 설정 |
| 경로 결정 | 동적 라우팅 | 프로토콜이 자동 학습 |
| 알고리즘 | 거리 벡터 | 홉 수 기반 (RIP) |
| 알고리즘 | 링크 상태 | 전체 토폴로지 파악 (OSPF) |
| 알고리즘 | 경로 벡터 | AS 경로 기반 (BGP) |
| 범위 | IGP | 내부 게이트웨이 프로토콜 |
| 범위 | EGP | 외부 게이트웨이 프로토콜 |

### 주요 라우팅 프로토콜

| 프로토콜 | 유형 | 메트릭 | 특징 |
|---------|------|--------|------|
| RIP | 거리 벡터 | 홉 수 (최대 15) | 소규모 네트워크, 30초 업데이트 |
| RIPv2 | 거리 벡터 | 홉 수 | VLSM, 인증 지원 |
| OSPF | 링크 상태 | 대역폭 기반 비용 | 대규모 네트워크, 영역 개념 |
| IS-IS | 링크 상태 | 비용 | ISP 네트워크 |
| EIGRP | 하이브리드 | 대역폭, 지연 등 | Cisco 전용 (현재 공개) |
| BGP | 경로 벡터 | AS 경로, 정책 | 인터넷 백본, AS 간 라우팅 |

### RIP (Routing Information Protocol)

| 항목 | RIPv1 | RIPv2 |
|------|-------|-------|
| 라우팅 유형 | 클래스풀 | 클래스리스 (VLSM) |
| 업데이트 방식 | 브로드캐스트 | 멀티캐스트 (224.0.0.9) |
| 인증 | 없음 | 평문/MD5 |
| 최대 홉 수 | 15 | 15 |

### OSPF (Open Shortest Path First)

| 항목 | 설명 |
|------|------|
| 알고리즘 | Dijkstra (SPF) |
| 메트릭 | 비용 (10^8 / 대역폭) |
| 업데이트 | 변경 시에만 (LSA) |
| 멀티캐스트 | 224.0.0.5 (All SPF), 224.0.0.6 (DR) |
| 영역 | Area 0 (백본), 다른 영역 |

**OSPF 라우터 유형**

| 유형 | 설명 |
|------|------|
| DR (Designated Router) | 영역 내 대표 라우터 |
| BDR (Backup DR) | DR 백업 |
| ABR (Area Border Router) | 영역 경계 라우터 |
| ASBR (AS Boundary Router) | AS 경계 라우터 |

**OSPF 패킷 유형**

| 유형 | 이름 | 설명 |
|------|------|------|
| 1 | Hello | 이웃 발견, 유지 |
| 2 | DBD | 데이터베이스 설명 |
| 3 | LSR | 링크 상태 요청 |
| 4 | LSU | 링크 상태 업데이트 |
| 5 | LSAck | 링크 상태 확인 |

### BGP (Border Gateway Protocol)

| 항목 | 설명 |
|------|------|
| 용도 | AS 간 라우팅 (인터넷 백본) |
| 프로토콜 | TCP 179 |
| 알고리즘 | 경로 벡터 |
| 선택 기준 | AS 경로 길이, 정책 등 |

**BGP 속성**

| 속성 | 설명 |
|------|------|
| AS_PATH | 경유한 AS 목록 |
| NEXT_HOP | 다음 홉 주소 |
| LOCAL_PREF | 로컬 선호도 (높을수록 우선) |
| MED | Multi-Exit Discriminator |
| ORIGIN | 경로 출처 (IGP, EGP, Incomplete) |

---

## DNS (Domain Name System)

### DNS 개요

| 항목 | 설명 |
|------|------|
| 포트 | 53/UDP (쿼리), 53/TCP (영역 전송) |
| 기능 | 도메인 이름을 IP 주소로 변환 |
| 구조 | 계층적 분산 데이터베이스 |

### DNS 레코드 유형

| 레코드 | 설명 |
|--------|------|
| A | IPv4 주소 매핑 |
| AAAA | IPv6 주소 매핑 |
| CNAME | 별칭 (Canonical Name) |
| MX | 메일 서버 지정 |
| NS | 네임서버 지정 |
| PTR | 역방향 조회 (IP → 도메인) |
| SOA | 영역 권한 정보 |
| TXT | 텍스트 정보 (SPF, DKIM 등) |
| SRV | 서비스 위치 |

### DNS 질의 유형

| 유형 | 설명 |
|------|------|
| 재귀 질의 (Recursive) | 최종 응답까지 서버가 처리 |
| 반복 질의 (Iterative) | 다음 질의할 서버 정보 반환 |

### DNS 동작 과정

```
클라이언트 -> 로컬 DNS -> 루트 DNS -> TLD DNS -> 권한 DNS
                 |                                   |
                 |<---------- 최종 응답 -------------|
```

1. 클라이언트가 로컬 DNS 서버에 질의
2. 로컬 DNS가 캐시 확인
3. 없으면 루트 DNS 서버에 질의
4. 루트가 TLD(.com) 서버 주소 반환
5. TLD가 권한 DNS 서버 주소 반환
6. 권한 DNS가 최종 IP 주소 반환

### DNS 보안 위협

| 위협 | 설명 |
|------|------|
| DNS Spoofing | 위조된 DNS 응답 전송 |
| DNS Cache Poisoning | 캐시에 위조된 레코드 삽입 |
| DNS Amplification | DNS를 이용한 DDoS 공격 |
| DNS Tunneling | DNS를 통한 데이터 유출 |

### DNSSEC

| 레코드 | 설명 |
|--------|------|
| RRSIG | 리소스 레코드 서명 |
| DNSKEY | 공개 키 |
| DS | 위임 서명자 |
| NSEC/NSEC3 | 존재하지 않는 레코드 증명 |

---

## HTTP/HTTPS

### HTTP 개요

| 항목 | 설명 |
|------|------|
| 포트 | 80/TCP |
| 특성 | 무상태(Stateless), 요청-응답 |
| 버전 | HTTP/1.0, HTTP/1.1, HTTP/2, HTTP/3 |

### HTTP 메서드

| 메서드 | 설명 | 멱등성 |
|--------|------|--------|
| GET | 리소스 조회 | O |
| POST | 리소스 생성 | X |
| PUT | 리소스 전체 수정 | O |
| PATCH | 리소스 부분 수정 | X |
| DELETE | 리소스 삭제 | O |
| HEAD | 헤더만 조회 | O |
| OPTIONS | 지원 메서드 확인 | O |
| TRACE | 경로 추적 (보안 위험) | O |
| CONNECT | 터널 설정 | - |

### HTTP 상태 코드

| 범위 | 분류 | 예시 |
|------|------|------|
| 1xx | 정보 | 100 Continue |
| 2xx | 성공 | 200 OK, 201 Created |
| 3xx | 리다이렉션 | 301 Moved Permanently, 302 Found |
| 4xx | 클라이언트 오류 | 400 Bad Request, 401 Unauthorized, 403 Forbidden, 404 Not Found |
| 5xx | 서버 오류 | 500 Internal Server Error, 502 Bad Gateway, 503 Service Unavailable |

### HTTP 헤더

| 헤더 | 설명 |
|------|------|
| Host | 요청 대상 호스트 |
| User-Agent | 클라이언트 정보 |
| Accept | 수용 가능한 콘텐츠 타입 |
| Content-Type | 본문 콘텐츠 타입 |
| Cookie | 쿠키 전송 |
| Set-Cookie | 쿠키 설정 |
| Authorization | 인증 정보 |
| Cache-Control | 캐시 제어 |

### HTTPS

| 항목 | 설명 |
|------|------|
| 포트 | 443/TCP |
| 프로토콜 | HTTP + TLS/SSL |
| 기능 | 기밀성, 무결성, 인증 |

### TLS Handshake

```
클라이언트                    서버
    |                          |
    |---- ClientHello -------->|
    |                          |
    |<--- ServerHello ---------|
    |<--- Certificate ---------|
    |<--- ServerKeyExchange ---|
    |<--- ServerHelloDone -----|
    |                          |
    |---- ClientKeyExchange -->|
    |---- ChangeCipherSpec --->|
    |---- Finished ----------->|
    |                          |
    |<--- ChangeCipherSpec ----|
    |<--- Finished ------------|
    |                          |
    |   암호화 통신 시작        |
```

---

## 무선 네트워크

### Wi-Fi 표준

| 표준 | 명칭 | 주파수 | 최대 속도 |
|------|------|--------|----------|
| 802.11b | Wi-Fi 1 | 2.4GHz | 11Mbps |
| 802.11a | Wi-Fi 2 | 5GHz | 54Mbps |
| 802.11g | Wi-Fi 3 | 2.4GHz | 54Mbps |
| 802.11n | Wi-Fi 4 | 2.4/5GHz | 600Mbps |
| 802.11ac | Wi-Fi 5 | 5GHz | 6.9Gbps |
| 802.11ax | Wi-Fi 6 | 2.4/5/6GHz | 9.6Gbps |

### 무선 보안 프로토콜

| 프로토콜 | 암호화 | 인증 | 취약점 |
|---------|--------|------|--------|
| WEP | RC4 (40/104비트) | 공유키 | IV 취약, 쉽게 해독 |
| WPA | TKIP (RC4) | PSK/802.1X | TKIP 취약점 |
| WPA2 | AES-CCMP | PSK/802.1X | KRACK 공격 |
| WPA3 | AES-GCMP | SAE/802.1X | 현재 가장 안전 |

### 무선 네트워크 구성요소

| 구성요소 | 설명 |
|---------|------|
| AP (Access Point) | 무선 접속 장치 |
| STA (Station) | 무선 클라이언트 |
| SSID | 네트워크 식별자 |
| BSSID | AP의 MAC 주소 |
| ESS | 여러 AP로 구성된 네트워크 |

---

## 네트워크 명령어

### Windows 명령어

| 명령어 | 설명 |
|--------|------|
| ipconfig | IP 설정 확인 |
| ipconfig /all | 상세 설정 확인 |
| ipconfig /release | DHCP IP 해제 |
| ipconfig /renew | DHCP IP 갱신 |
| ipconfig /flushdns | DNS 캐시 삭제 |
| ping | ICMP 연결 테스트 |
| tracert | 경로 추적 |
| nslookup | DNS 조회 |
| netstat | 네트워크 연결 상태 |
| arp -a | ARP 캐시 확인 |
| route print | 라우팅 테이블 확인 |

### Linux 명령어

| 명령어 | 설명 |
|--------|------|
| ip addr / ifconfig | IP 설정 확인 |
| ip route / route -n | 라우팅 테이블 |
| ping | ICMP 테스트 |
| traceroute | 경로 추적 |
| dig / nslookup | DNS 조회 |
| netstat / ss | 네트워크 연결 |
| arp -a | ARP 캐시 |
| tcpdump | 패킷 캡처 |

### netstat 옵션

| 옵션 | 설명 |
|------|------|
| -a | 모든 연결 표시 |
| -n | 숫자로 표시 (이름 해석 안 함) |
| -t | TCP 연결 |
| -u | UDP 연결 |
| -l | LISTEN 상태만 |
| -p | 프로세스 ID/이름 |
| -r | 라우팅 테이블 |

---

## 핵심 키워드

`OSI 7계층` `TCP/IP` `MAC 주소` `IP 주소` `TCP` `UDP` `ICMP` `ARP` `3-Way Handshake` `4-Way Handshake` `서브넷팅` `CIDR` `IPv6` `Well-Known 포트` `허브` `스위치` `라우터` `L3 스위치` `CSMA/CD` `CSMA/CA` `ARQ` `DHCP` `NAT` `PAT` `VLAN` `802.1Q` `RIP` `OSPF` `BGP` `DNS` `DNSSEC` `HTTP` `HTTPS` `TLS` `WPA2` `WPA3`
